<!DOCTYPE html>
<html>
  <head>
    <title>CCC Samples - Treemap</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="../package-res/lib/jquery.js"></script>
    
    <script type="text/javascript" src="../package-res/lib/protovis.js"></script>
    <script type="text/javascript" src="../package-res/lib/protovis-msie.js"></script>
    <script type="text/javascript" src="../package-res/lib/jquery.tipsy.js"></script>
    <script type="text/javascript" src="../package-res/lib/tipsy.js"></script>
    <link type="text/css" href="../package-res/lib/tipsy.css" rel="stylesheet"/>
    
    <script type="text/javascript" src="data/flare.js"></script>
    <script type="text/javascript" src="data/q01-01.js"></script>
    
    <script type="text/javascript" src="../package-res/def/def.js"></script>

    <!-- @SCRIPTSBEG@ -->
        <script type="text/javascript" src="../package-res/ccc/core/base/shims.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/prologue.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/log.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/stringify.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/extension.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/colorScheme.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/time.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/mark.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/value/casts.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/value/enums.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/value/offset.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/value/percentValue.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/value/sides.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/value/size.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/abstract.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/optionsMgr.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/abstract-options.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/abstract-interactive.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/color.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/context.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/text.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/trends.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/scene/scene.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/scene/var.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/visualRole/visualRole.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/visualRole/visualRolesBinder.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/visualRole/visualRoleVarHelper.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/dataCell/dataCell.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/dataCell/color-dataCell.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/axis/axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/axis/color-axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/axis/size-axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/axis/normalized-axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/panel/panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/plot/plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/plot/plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/plot/plotBg-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/legend-options.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/legend-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/scene/root-legend-scene.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/scene/group-legend-scene.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/scene/item-legend-scene.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/scene/item-legend-scene.selection.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/scene/item-legend-scene.visibility.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/scene/item-legend-renderer.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/legend/scene/default-item-legend-renderer.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/title/abstract-title-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/title/title-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/panel/dockingGrid-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.visualRoles.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.data.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.plots.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.axes.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.panels.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.selection.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/chart/chart.extension.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/multi/multiChart-options.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/multi/multiChart-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/multi/smallChart-options.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/base-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/panel-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/label-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/value-label-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/dot-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/dotSizeColor-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/line-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/area-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/bar-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/base/sign/rule-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/axis/cart-axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/axis/root-cart-axis-scene.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/axis/tick-cart-axis-scene.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/axis/abstract-cart-axis-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/axis/cart-axis-title-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/cart-focusWindow.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/ortho-cart-dataCell.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/cart-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/cart-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/cart-dockingGrid-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/cartesian/cart-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/categorical/categ-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/categorical/categ-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/core/categorical/categ-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/cdo/_data.js"></script>
        <script type="text/javascript" src="../package-res/cdo/meta/dimensionType.js"></script>
        <script type="text/javascript" src="../package-res/cdo/meta/complexType.js"></script>
        <script type="text/javascript" src="../package-res/cdo/meta/complexTypeProject.js"></script>
        <script type="text/javascript" src="../package-res/cdo/atom.js"></script>
        <script type="text/javascript" src="../package-res/cdo/complex.js"></script>
        <script type="text/javascript" src="../package-res/cdo/complexView.js"></script>
        <script type="text/javascript" src="../package-res/cdo/datum.js"></script>
        <script type="text/javascript" src="../package-res/cdo/dimension.js"></script>
        <script type="text/javascript" src="../package-res/cdo/data/data.js"></script>
        <script type="text/javascript" src="../package-res/cdo/data/data.selected.js"></script>
        <script type="text/javascript" src="../package-res/cdo/data/data.operations.js"></script>
        <script type="text/javascript" src="../package-res/cdo/data/data.compat.js"></script>
        <script type="text/javascript" src="../package-res/cdo/oper/abstract-oper.js"></script>
        <script type="text/javascript" src="../package-res/cdo/oper/grouping-oper.js"></script>
        <script type="text/javascript" src="../package-res/cdo/oper/groupingSpec.js"></script>
        <script type="text/javascript" src="../package-res/cdo/oper/linear-interp-oper.js"></script>
        <script type="text/javascript" src="../package-res/cdo/oper/linear-interp-seriesState.js"></script>
        <script type="text/javascript" src="../package-res/cdo/oper/zero-interp-oper.js"></script>
        <script type="text/javascript" src="../package-res/cdo/oper/zero-interp-seriesState.js"></script>
        <script type="text/javascript" src="../package-res/cdo/translation/abstract-transl.js"></script>
        <script type="text/javascript" src="../package-res/cdo/translation/abstract-matrix-transl.js"></script>
        <script type="text/javascript" src="../package-res/cdo/translation/crosstab-transl.js"></script>
        <script type="text/javascript" src="../package-res/cdo/translation/relational-transl.js"></script>
        <script type="text/javascript" src="../package-res/cdo/format/number-formatStyle.js"></script>
        <script type="text/javascript" src="../package-res/cdo/format/number-format.js"></script>
        <script type="text/javascript" src="../package-res/cdo/format/date-format.js"></script>
        <script type="text/javascript" src="../package-res/cdo/format/custom-format.js"></script>
        <script type="text/javascript" src="../package-res/cdo/format/formatProvider.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/abstract-metricxy/abstract-metricxy-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/abstract-metricxy/abstract-metricxy-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/abstract-bar/abstract-bar-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/abstract-bar/abstract-bar-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/abstract-bar/abstract-bar-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/pie/pie-slice-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/pie/pie-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/pie/pie-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/pie/pie-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/bar/bar-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/bar/bar-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/bar/bar-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/nbar/nbar-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/nbar/nbar-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/nbar/nbar-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/water/water-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/water/water-group-legend-scene.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/water/water-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/water/water-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/point/point-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/point/point-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/point/point-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/scatter/scatter-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/scatter/scatter-transl.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/scatter/scatter-size-axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/scatter/scatter-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/scatter/scatter-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/heatGrid/hg-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/heatGrid/hg-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/heatGrid/hg-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/box/box-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/box/box-transl.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/box/box-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/box/box-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/treemap/treemap-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/treemap/treemap-color-axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/treemap/treemap-transl.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/treemap/treemap-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/treemap/treemap-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/sunburst/sun-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/sunburst/sun-color-axis.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/sunburst/sun-transl.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/sunburst/sun-plot-panel.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/sunburst/sun-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/sunburst/sun-slice-sign.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/bullet/bullet-plot.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/bullet/bullet-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/parallel/par-chart.js"></script>
        <script type="text/javascript" src="../package-res/ccc/plugin/dataTree/dt-chart.js"></script>
    <!-- @SCRIPTSEND@ -->

    <link type="text/css" href="lib/codemirror/codemirror.css" rel="stylesheet"/>
    <script src="lib/codemirror/codemirror.js" type="text/javascript"></script>
    <script src="lib/codemirror/javascript.js" type="text/javascript"></script>
    
    <script type="text/javascript" src="pvcDocUtils.js"></script>
    <link type="text/css" href="pvcDocUtils.css" rel="stylesheet"/>
  </head>
  <body>

    <h1>Treemap Chart</h1>

<h2>Examples</h2>
<h3>A Single-Level Treemap</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="90" rows="15" id="pvcTreemap1Code">
new pvc.TreemapChart({
    canvas:     'pvcTreemap1',
    width:      400,
    height:     300,
    title:      "Single-Level Treemap",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    rootCategoryLabel: "World"
})
.setData(testTreemapSingleLevel, {crosstabMode: false})
.render();</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap1"></div>
</div>
</div>
</div>


<h3>A Three-Level Treemap</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="55" rows="15" id="pvcTreemap2Code">
/*
new pvc.TreemapChart({
    canvas:     'pvcTreemap2',
    width:      400,
    height:     300,
    title:      "Three-Level Treemap",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    rootCategoryLabel: "Earth"
})
.setData(testTreemapThreeLevel, {crosstabMode: false})
.render();
*/
new pvc.TreemapChart({
    canvas:     'pvcTreemap2',
    width:      400,
    height:     300,
    title:      "Three-Level Treemap",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    rootCategoryLabel: "",
    //legendSizeMax: '15%',
    legend: {
        scenes: {
            item: {
                labelText: function() {
                    var indent = "";
                    var group  = this.group;
                    if(group) {
                        var depth = group.depth;
                        // 0 ""
                        // 1 "text"
                        // 2 "└ text"
                        // 3 "  └ text"
                        switch(depth) {
                            case 0: return "";
                            case 1: break;
                            case 2: indent = "└ "; break;
                            default:
                                indent = new Array(2*(depth-2) + 1).join(" ") + "└ ";
                        }
                    }
                    return indent + this.base();
                }
            }
        }
    },
    extensionPoints: {
        //legendLabel_textAlign: 'right'
    }
})
.setData(testTreemapThreeLevel, {crosstabMode: false})
.render();
</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap2"></div>
</div>
</div>
</div>

<h3>Slice-and-dice Layout And Self-Colored</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="55" rows="15" id="pvcTreemap3Code">
new pvc.TreemapChart({
    canvas:     'pvcTreemap3',
    width:      400,
    height:     300,
    title:      "Slice-and-dice Layout",
    titleFont:  'italic 14px sans-serif',
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    rootCategoryLabel: "Earth",
    valuesOptimizeLegibility: false,
    layoutMode: 'slice-and-dice',
    colorMode:  'bySelf'
})
.setData(testTreemapThreeLevel, {crosstabMode: false})
.render();</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap3"></div>
</div>
</div>
</div>

<h3>Small Multiple Treemaps</h3>
<div class="tryItTable">
<div>
<div>
<textarea cols="55" rows="15" id="pvcTreemap4Code">
new pvc.TreemapChart({
    canvas:     'pvcTreemap4',
    width:      600,
    height:     400,
    title:      "Small Multiple Treemaps",
    titleFont:  'italic 14px sans-serif',
    smallTitleFont:  'bold 14px sans-serif',
    colors:     pv.Colors.category19,
    selectable: true,
    hoverable:  true,
    legend:     true,
    legendPosition: 'right',
    multiChartIndexes: 0,
    rootCategoryLabel: "flare",
    colorRole: "multiChart, category, category2, category3",
    legend: {
        scenes: {
            item: {
                labelText: function() {
                    var indent = "";
                    var group  = this.group;
                    if(group) {
                        var depth = group.depth;
                        // 0 ""
                        // 1 "text"
                        // 2 "└ text"
                        // 3 "  └ text"
                        switch(depth) {
                            case 0: return "";
                            case 1: break;
                            case 2: indent = "└ "; break;
                            default:
                                indent = new Array(2*(depth-2) + 1).join(" ") + "└ ";
                        }
                    }
                    return indent + this.base();
                }
            }
        }
    }
})
.setData(buildDataset(flare), {crosstabMode: false})
.render();</textarea>
<button class="tryMe" onclick='tryMe(this)'>Try me</button>
</div>
<div>
<div id="pvcTreemap4"></div>
</div>
</div>
</div>

  </body>
</html>
